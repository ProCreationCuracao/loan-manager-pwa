(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{18:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});let n=(0,r(8).UU)("https://tudggygmmhhyiuutisow.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR1ZGdneWdtbWhoeWl1dXRpc293Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzMjE1NzEsImV4cCI6MjA2OTg5NzU3MX0.cKGsqM6Fw48XEZJxXOwyEL36BzmSv_DwtchYmY4Jz0o")},920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ServerInsertedHTMLContext:function(){return u},useServerInsertedHTML:function(){return o}});let n=r(8781)._(r(5977)),u=n.default.createContext(null);function o(e){let t=(0,n.useContext)(u);t&&t(e)}},1778:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(8666).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2551:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n,u=r(7765),o=r(5977),l=r(18);function a(){let[e,t]=(0,o.useState)(null),[r,n]=(0,o.useState)(""),[a,i]=(0,o.useState)(""),[d,s]=(0,o.useState)(""),[c,f]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=l.N.auth.session();t((null==e?void 0:e.user)||null);let{data:r}=l.N.auth.onAuthStateChange((e,r)=>t((null==r?void 0:r.user)||null));return()=>r.unsubscribe()},[]);let p=async t=>{var r;if(!(null==(r=t.target.files)?void 0:r[0])||!e)return;f(!0);let n=t.target.files[0],u=n.name.split(".").pop(),o="".concat(e.id,".").concat(Date.now(),".").concat(u),{data:a,error:i}=await l.N.storage.from("id-photos").upload(o,n,{upsert:!0});if(i)console.error(i),alert("Upload failed.");else{let{publicURL:e,error:t}=l.N.storage.from("id-photos").getPublicUrl(a.path);t?console.error(t):s(e)}f(!1)},_=async t=>{if(t.preventDefault(),!e)return alert("Not signed in");let{error:n}=await l.N.from("profiles").upsert({id:e.id,full_name:r,address:a,id_photo_url:d},{returning:"minimal"});n?console.error(n):alert("Profile saved!")};return e?(0,u.jsxs)("form",{onSubmit:_,className:"space-y-4 p-4 glass max-w-md mx-auto",children:[(0,u.jsx)("h2",{className:"text-xl font-bold",children:"Your Profile"}),(0,u.jsx)("input",{type:"text",placeholder:"Full Name",value:r,onChange:e=>n(e.target.value),className:"w-full p-2 rounded bg-white/20 text-white",required:!0}),(0,u.jsx)("input",{type:"text",placeholder:"Address",value:a,onChange:e=>i(e.target.value),className:"w-full p-2 rounded bg-white/20 text-white"}),(0,u.jsxs)("label",{className:"block",children:[(0,u.jsx)("span",{className:"text-white",children:"ID Photo"}),(0,u.jsx)("input",{type:"file",accept:"image/*",capture:"environment",onChange:p,className:"block w-full text-sm text-white/50"})]}),c&&(0,u.jsx)("p",{className:"text-white/80",children:"Uploading…"}),d&&(0,u.jsx)("img",{src:d,alt:"ID preview",className:"w-32 h-32 object-cover rounded-md"}),(0,u.jsx)("button",{type:"submit",className:"px-4 py-2 glass font-semibold",disabled:c,children:"Save Profile"})]}):(0,u.jsx)("p",{children:"Please sign in first."})}var i=r(6136);let d=(n=function(e){let{user:t}=e;return(0,u.jsx)(a,{})},function(e){let[t,r]=(0,o.useState)(!0),[a,d]=(0,o.useState)(null),s=(0,i.useRouter)();return((0,o.useEffect)(()=>{let e=l.N.auth.session();(null==e?void 0:e.user)?(d(e.user),r(!1)):s.replace("/login")},[s]),t)?(0,u.jsx)("p",{className:"text-center text-white",children:"Checking auth…"}):(0,u.jsx)(n,{...e,user:a})})},6136:(e,t,r)=>{e.exports=r(9255)},6227:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(8666).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7254:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return s},RedirectType:function(){return u.RedirectType},forbidden:function(){return l.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return a.unauthorized},unstable_rethrow:function(){return i.unstable_rethrow}});let n=r(9557),u=r(2446),o=r(9711),l=r(1778),a=r(6227),i=r(8159);class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class s extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8133:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,u.isNextRouterError)(t)||(0,n.isBailoutToCSRError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(9082),u=r(5246);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(8133).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8492:(e,t)=>{"use strict";function r(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9255:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return i.ReadonlyURLSearchParams},RedirectType:function(){return i.RedirectType},ServerInsertedHTMLContext:function(){return d.ServerInsertedHTMLContext},forbidden:function(){return i.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return i.permanentRedirect},redirect:function(){return i.redirect},unauthorized:function(){return i.unauthorized},unstable_rethrow:function(){return i.unstable_rethrow},useParams:function(){return _},usePathname:function(){return f},useRouter:function(){return p},useSearchParams:function(){return c},useSelectedLayoutSegment:function(){return h},useSelectedLayoutSegments:function(){return b},useServerInsertedHTML:function(){return d.useServerInsertedHTML}});let n=r(5977),u=r(2931),o=r(9986),l=r(8492),a=r(4139),i=r(7254),d=r(920),s=void 0;function c(){let e=(0,n.useContext)(o.SearchParamsContext);return(0,n.useMemo)(()=>e?new i.ReadonlyURLSearchParams(e):null,[e])}function f(){return null==s||s("usePathname()"),(0,n.useContext)(o.PathnameContext)}function p(){let e=(0,n.useContext)(u.AppRouterContext);if(null===e)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return e}function _(){return null==s||s("useParams()"),(0,n.useContext)(o.PathParamsContext)}function b(e){void 0===e&&(e="children"),null==s||s("useSelectedLayoutSegments()");let t=(0,n.useContext)(u.LayoutRouterContext);return t?function e(t,r,n,u){let o;if(void 0===n&&(n=!0),void 0===u&&(u=[]),n)o=t[1][r];else{var i;let e=t[1];o=null!=(i=e.children)?i:Object.values(e)[0]}if(!o)return u;let d=o[0],s=(0,l.getSegmentValue)(d);return!s||s.startsWith(a.PAGE_SEGMENT_KEY)?u:(u.push(s),e(o,r,!1,u))}(t.parentTree,e):null}function h(e){void 0===e&&(e="children"),null==s||s("useSelectedLayoutSegment()");let t=b(e);if(!t||0===t.length)return null;let r="children"===e?t[0]:t[t.length-1];return r===a.DEFAULT_SEGMENT_KEY?null:r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return c},getRedirectTypeFromError:function(){return s},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return i},redirect:function(){return a}});let n=r(4564),u=r(2446),o=void 0;function l(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let o=Object.defineProperty(Error(u.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return o.digest=u.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",o}function a(e,t){var r;throw null!=t||(t=(null==o||null==(r=o.getStore())?void 0:r.isAction)?u.RedirectType.push:u.RedirectType.replace),l(e,t,n.RedirectStatusCode.TemporaryRedirect)}function i(e,t){throw void 0===t&&(t=u.RedirectType.replace),l(e,t,n.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,u.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function s(e){if(!(0,u.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function c(e){if(!(0,u.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9711:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return u}});let n=""+r(8666).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function u(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9750:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return r(2551)}])}},e=>{e.O(0,[8,636,593,792],()=>e(e.s=9750)),_N_E=e.O()}]);